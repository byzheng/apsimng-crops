---
title: ""
params:
  crop: "{{crop}}"
---

```{r setup, echo=FALSE}
knitr::opts_chunk$set(echo = FALSE, warning = FALSE, error = FALSE, message = FALSE)

if (!exists("params") || grepl("\\{", params$crop)) {
    crop <- "Wheat"
    cultivar <- "All"
} else {
    crop <- params[["crop"]]
    cultivar <- params[["cultivar"]]
}


```


```{r data-obs-sim}

# Read the obs/prediction files


obs_sim_cultivar <- get_obs(crop)

apsimx <- get_model(crop)
cultivars <- rapsimng::get_cultivar(apsimx, alias = TRUE) |> tibble::tibble()
experiments <- obs_sim_cultivar |> 
    dplyr::distinct(ExperimentName, Latitude, Longitude)
```


```{r child-cultivars, results = "asis"}
# include the performance section if there are data for this cultivar
here::here('_template/section/cultivars.qmd') |> 
    knitr::knit_child(quiet = TRUE) |>
    cat()
```

